<div [formGroup]="projectForm">
    <div class="row">
        <div class="col-6 mb-2">
            <mat-form-field class="bg-white p-2">
                <input type="text" class="text-dark font-weight-bold" matInput placeholder="Title of project" formControlName="title"  value="{{project?.title}}">
                <mat-error class="mat-h5" *ngIf="projectForm.get('title').getError('required') && projectForm.get('title').touched">
                    Title can't be empty
                </mat-error>
            </mat-form-field>
        </div>
        <div class="col-6 mb-2 text-right">
            <input type="file" style="display: none" (change)="onLogoChange($event)" #fileSelect [accept]="'.jpg'">
            <button (click) = "fileSelect.click()">
                <img src="{{logo}}"  alt="logo-image" width="100">
            </button>
            Logo
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <mat-form-field class="bg-white p-2">
                <input type="text" class="text-dark font-weight-bold" matInput placeholder="Description of project" formControlName="description"  value="{{project?.description}}">
                <mat-error class="mat-h5" *ngIf="projectForm.get('description').getError('required') && projectForm.get('description').touched">
                    Description can't be empty
                </mat-error>
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col-12" data-toggle="tooltip" title="Select if you want to add authentication for your project">
            <div class="row">
                <div class="col-2">
                   <div class="h5 text-dark text-left pl-2">
                       Add authentication
                   </div>
                </div>
                <div class="col-10 text-left">
                    <mat-checkbox value="{{projectForm.get('use_auth').value}}" formControlName="use_auth" (change)="use_auth($event)"></mat-checkbox>
                </div>
                <div class="col-12 ml-3 text-left" *ngIf="useAuthentication" >
                    <mat-checkbox value="{{projectForm.get('check_by_email').value}}" formControlName="check_by_email" (change)="checkByEmail($event)">
                        By email
                    </mat-checkbox>
                </div>
                <div class="col-12 ml-3 text-left" *ngIf="useAuthentication" >
                    <mat-checkbox formControlName="allow_anonymous" value="{{projectForm.get('allow_anonymous').value}}" (change)="anonymous_auth($event)">
                        Allow anonymous
                    </mat-checkbox>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <button type="button" class="btn bg-secondary w-100"
                data-toggle="collapse"
                data-target="#addActions"
                aria-expanded="false"
                aria-controls="addActions">
                        <span class="mat-h5 text-lowercase">
                                Add Actions to project
                        </span>
        </button>
        <div id="addActions" class="collapse text-dark shadow w-100" >
            <div class="border">
                <div class="row">
                    <div class="col-xl-2 col-4">Index</div>
                    <div class="col-xl-3 col-4">Title</div>
                    <div class="col-4 d-none d-lg-block">Short description</div>
                    <div class="col-1 d-none d-lg-block">Info</div>
                    <div class="col-xl-2 col-4">Select</div>
                </div>
            </div>
            <div class="w-100" style="height: 50px" *ngFor="let plugin of availablePlugins; let i = index" [class.bg-light]="i % 2 === 0">
                <div class="row mat-h4 text-lowercase" id="plugin{{plugin.id}}">
                    <div class="col-xl-2 col-4">{{i+1}}</div>
                    <div class="col-xl-3 col-4">{{plugin?.title}}</div>
                    <div class="col-4 d-none d-lg-block">{{plugin?.short_description}}</div>
                    <div class="col-1 d-none d-lg-block">

                        <!-- display in modal, details about selected plugin -->
                        <button data-toggle="modal" [attr.data-target]="'#pluginInfo' + i" style="border: 0; background-color: inherit">
                            <mat-icon style="font-size: 50px">
                                description
                            </mat-icon>
                        </button>
                        <!-- details dialog -->
                        <div class="mt-5 modal fade" id="pluginInfo{{i}}" tabindex="-1" role="dialog"  aria-hidden="true">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header m-2 bg-secondary border border-info">
                                        <h3 class="modal-title text-white" id="settings" style="font-weight: bold">
                                            Details about plugin
                                        </h3>
                                    </div>
                                    <div class="modal-body border border-info m-2">
                                        {{plugin?.description}}
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-xl-2 col-4">
                        <button class="btn btn-info btn-just-icon" type="button" (click)="onAddPlugin(plugin)">
                            +
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <button type="button" class="btn bg-secondary shadow w-100"
                data-toggle="collapse"
                data-target="#selectedActions"
                aria-expanded="true"
                aria-controls="addActions">
                        <span class="mat-h5 text-lowercase">
                                Selected Actions
                        </span>
        </button>
        <div id="selectedActions" class="collapse w-100 shadow ">
            <div class="border">
                <div class="row">
                    <div class="col-xl-2 col-4">Index</div>
                    <div class="col-xl-3 col-4">Title</div>
                    <div class="col-5  d-none d-lg-block">Short description</div>
                    <div class="col-xl-2 col-4">Remove</div>
                </div>
            </div>
            <div class="w-100" style="height: 50px" *ngFor="let selectedPlugin of selectedPlugins; let i = index" [class.bg-light]="i % 2 === 0">
                <div class="row mat-h4 text-lowercase" id="plugin{{selectedPlugin.id}}">
                    <div class="col-xl-2 col-4">{{i+1}}</div>
                    <div class="col-xl-3 col-4">{{selectedPlugin?.title}}</div>
                    <div class="col-5  d-none d-lg-block">{{selectedPlugin?.short_description}}</div>
                    <div class="col-xl-2 col-4">
                        <button class="btn btn-danger btn-just-icon" type="button" (click)="onRemovePlugin(selectedPlugin)">
                            -
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row mb-2" *ngIf="isModal">  <!-- Available only if coming from modal. In Step-By-Step will not displayed-->
    <div class="col-6   text-left">
        <button type="submit" class="btn btn-dark" data-dismiss="modal" (click)="onSubmit()">
            Save
        </button>
    </div>
    <div class="col-6  text-right">
        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">
            Cancel
        </button>
    </div>
</div>


